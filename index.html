<!DOCTYPE html>
<html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>极简编辑器</title><style>
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}body{margin:0;font-family:"PingFang SC","Helvetica Neue",Helvetica,Arial,sans-serif;height:100vh;display:flex;flex-direction:column;background:#fff;color:#000;overflow:hidden}
header{padding:19px 20px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #000;letter-spacing:1px}h1{margin:0;font-size:20px;font-weight:900;text-transform:uppercase}
#list-view{flex:1;overflow-y:auto;padding:0 20px;-webkit-overflow-scrolling:touch}.item{display:flex;justify-content:space-between;align-items:center;padding:20px 0;border-bottom:1px solid #eee}
.item-name{font-size:16px;font-weight:400;color:#000;text-decoration:none;flex:1}.del-btn{font-size:12px;text-transform:uppercase;letter-spacing:1px;color:#999;border:none;background:none;padding:5px}
#edit-view{position:fixed;top:0;left:0;right:0;bottom:0;display:none;flex-direction:column;background:#fff;z-index:99}.bar{padding:10px 20px;display:flex;align-items:center;border-bottom:1px solid #000;gap:8px;flex-wrap:nowrap}
#fn{flex:1;border:none;outline:0;font-size:16px;font-weight:bold;letter-spacing:1px;font-family:"PingFang SC","Helvetica Neue",Helvetica,Arial,sans-serif;min-width:0}
textarea{flex:1;width:100%;padding:20px;border:none;outline:0;font-size:16px;line-height:1.6;color:#333;background:#fff;white-space:pre-wrap;word-break:break-all;overflow-y:auto;font-family:"PingFang SC","Helvetica Neue",Helvetica,Arial,sans-serif}
.btn{border:1px solid #000;background:none;padding:8px 12px;font-size:12px;text-transform:uppercase;letter-spacing:1px;font-weight:bold;cursor:pointer;transition:all 0.2s;font-family:"PingFang SC","Helvetica Neue",Helvetica,Arial,sans-serif;white-space:nowrap;flex-shrink:0;height:36px}
.btn-black{background:#000;color:#fff}.btn-black:active{background:#444}.btn:active{background:#eee}
.fs-bar{padding:10px 20px;display:flex;align-items:center;gap:20px;font-size:11px;color:#999;border-bottom:1px solid #eee;text-transform:uppercase}.empty{text-align:center;margin-top:100px;font-size:14px;color:#ccc;letter-spacing:2px}
</style></head><body>

<header><h1>世纪简码</h1><button class="btn btn-black" onclick="edit('')">新建文件</button></header>

<div id="list-view"></div>

<div id="edit-view">
<div class="bar">
  <input id="fn" spellcheck="false" placeholder="文件名.HTML">
  <button class="btn" onclick="save()">保存</button>
  <button class="btn" onclick="back()">返回</button>
  <button class="btn btn-black" onclick="run()">运行</button>
</div>
<div class="fs-bar"><span>字体大小</span><span onclick="setFs(-2)" style="cursor:pointer;color:#000;font-weight:bold">—</span><span id="fv" style="color:#000">16px</span><span onclick="setFs(2)" style="cursor:pointer;color:#000;font-weight:bold">＋</span></div>
<textarea id="ed" spellcheck="false" placeholder="在此编写代码..."></textarea>
</div>

<script>
let db=JSON.parse(localStorage.getItem('h_v6')||'{}'),fs=16;
const $=id=>document.getElementById(id),lv=$('list-view'),ev=$('edit-view');

function render(){
lv.innerHTML=Object.keys(db).length?'':'<div class="empty">未找到文件</div>';
Object.keys(db).sort().forEach(n=>{
let d=document.createElement('div');d.className='item';
d.innerHTML=`<div class="item-name" onclick="edit('${n}')">${n}</div><button class="del-btn" onclick="del('${n}')">删除</button>`;
lv.appendChild(d);
});
}

function edit(n){
ev.style.display='flex';
$('fn').value=n||'未命名.HTML';
$('ed').value=n?db[n]:'<!DOCTYPE html>\n<html>\n<head>\n<style>\nbody{font-family:sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;}\n</style>\n</head>\n<body>\n<h1>你好世界</h1>\n</body>\n</html>';
$('ed').focus();
}

function save(){
let n=$('fn').value.toUpperCase(),c=$('ed').value;
if(!n)return alert('请输入文件名');
db[n]=c;
localStorage.setItem('h_v6',JSON.stringify(db));
alert('已保存: '+n);
render();
}

function back(){
ev.style.display='none';
render();
}

function run(){
let n=$('fn').value.toUpperCase(),c=$('ed').value;
if(!n)return alert('请输入文件名');
if(!db[n])save(); // 如果文件不存在，先保存
const blob=new Blob([c],{type:'text/html'});
window.open(URL.createObjectURL(blob),'_blank');
}

function del(n){
if(confirm('确认删除？')){
delete db[n];
localStorage.setItem('h_v6',JSON.stringify(db));
render();
}
}

function setFs(v){
fs+=v;
if(fs<10)fs=10;
$('ed').style.fontSize=fs+'px';
$('fv').innerText=fs+'px';
}

render();
</script>
</body></html>