<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>极简编辑器</title><style>*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}body{margin:0;height:100vh;display:flex;flex-direction:column;background:#fff;color:#000;overflow:hidden}header{padding:15px 20px;display:flex;flex-direction:column;gap:10px;border-bottom:1px solid #000}#hd-top{display:flex;justify-content:space-between;align-items:center}h1{margin:0;font-size:18px;font-weight:900;text-transform:uppercase}#hd-btns{display:flex;gap:8px}.btn-s{padding:5px 10px;font-size:11px}#list-view{flex:1;overflow-y:auto;padding:0 20px;-webkit-overflow-scrolling:touch}.item{display:flex;justify-content:space-between;align-items:center;padding:20px 0;border-bottom:1px solid #eee}.item-name{font-size:16px;font-weight:400;color:#000;flex:1}.del-btn{font-size:12px;color:#999;border:none;background:none;padding:5px}#edit-view,#pre-view{position:fixed;top:0;left:0;right:0;bottom:0;display:none;flex-direction:column;background:#fff;z-index:99}.bar{padding:10px 16px;display:flex;align-items:center;border-bottom:1px solid #000;gap:6px;justify-content:flex-start}#fn{width:120px;border:none;outline:0;font-size:15px;font-weight:bold;flex-shrink:1}textarea{flex:1;width:100%;padding:20px;border:none;outline:0;font-size:16px;line-height:1.6;color:#333;white-space:pre-wrap;word-break:break-all;overflow-y:auto}iframe{flex:1;width:100%;border:none}.btn{border:1px solid #000;background:none;padding:6px 16px;font-size:12px;text-transform:uppercase;font-weight:bold;cursor:pointer;white-space:nowrap;margin-right:2px}.btn-black{background:#000;color:#fff}.fs-bar{padding:10px 20px;display:flex;align-items:center;gap:20px;font-size:11px;color:#999;border-bottom:1px solid #eee}.empty{text-align:center;margin-top:100px;font-size:14px;color:#ccc;letter-spacing:2px}</style></head><body><header><div id="hd-top"><h1>世纪简码</h1><button class="btn btn-black" onclick="edit('')">新建文件</button></div><div id="hd-btns"><button class="btn btn-s" onclick="bakOut()">备份全部</button><button class="btn btn-s" onclick="$('bakIn').click()">导入备份</button><input type="file" id="bakIn" style="display:none" onchange="bakLoad(this)" accept=".json"></div></header><div id="list-view"></div><div id="edit-view"><div class="bar"><input id="fn" spellcheck="false" placeholder="文件名"><button class="btn" onclick="save()">保存</button><button class="btn" onclick="exp()">导出</button><button class="btn" onclick="back()">返回</button><button class="btn btn-black" onclick="run()">运行</button></div><div class="fs-bar"><span>字体大小</span><span onclick="setFs(-2)" style="cursor:pointer;color:#000;font-weight:bold">—</span><span id="fv" style="color:#000">16px</span><span onclick="setFs(2)" style="cursor:pointer;color:#000;font-weight:bold">＋</span></div><textarea id="ed" spellcheck="false"></textarea></div><div id="pre-view"><div class="bar"><span id="pre-title" style="flex:1;font-weight:bold;font-size:14px">预览</span><button class="btn" onclick="$('pre-view').style.display='none'">关闭预览</button></div><iframe id="ifr"></iframe></div><script>let db=JSON.parse(localStorage.getItem('h_v6')||'{}'),fs=16;const $=id=>document.getElementById(id),lv=$('list-view'),ev=$('edit-view');function render(){lv.innerHTML=Object.keys(db).length?'':'<div class="empty">未找到文件</div>';Object.keys(db).sort().forEach(n=>{let d=document.createElement('div');d.className='item';d.innerHTML=`<div class="item-name" onclick="edit('${n}')">${n}</div><button class="del-btn" onclick="del('${n}')">删除</button>`;lv.appendChild(d)})}function edit(n){ev.style.display='flex';$('fn').value=n||'未命名.HTML';$('ed').value=n?db[n]:'<!DOCTYPE html>\n<html>\n<head>\n<meta charset="UTF-8">\n<meta name="viewport" content="width=device-width,initial-scale=1">\n<style>\nbody{font-family:system-ui;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;}\n</style>\n</head>\n<body>\n<h1>你好世界</h1>\n</body>\n</html>';$('ed').focus()}function save(){let n=$('fn').value.toUpperCase(),c=$('ed').value;if(!n)return alert('请输入文件名');db[n]=c;localStorage.setItem('h_v6',JSON.stringify(db));render();return true}function exp(){if(save()){const n=$('fn').value.toUpperCase(),c=$('ed').value,b=new Blob([c],{type:'text/html'}),u=URL.createObjectURL(b),a=document.createElement('a');a.href=u;a.download=n.endsWith('.HTML')?n:n+'.HTML';a.click();URL.revokeObjectURL(u)}}function bakOut(){const b=new Blob([JSON.stringify(db)],{type:'application/json'}),u=URL.createObjectURL(b),a=document.createElement('a');a.href=u;a.download='世纪简码备份_'+new Date().getTime()+'.json';a.click()}function bakLoad(i){const f=i.files[0];if(!f)return;const r=new FileReader();r.onload=e=>{try{const data=JSON.parse(e.target.result);if(confirm('导入将合并现有文件，确认吗？')){db=Object.assign(db,data);localStorage.setItem('h_v6',JSON.stringify(db));render();alert('导入成功')}}catch(err){alert('备份文件格式错误')}};r.readAsText(f);i.value=''}function back(){ev.style.display='none';render()}function run(){let n=$('fn').value.toUpperCase(),c=$('ed').value;if(!n)return alert('请输入文件名');save();$('ifr').srcdoc=c;$('pre-view').style.display='flex';$('pre-title').innerText='预览: '+n}function del(n){if(confirm('确认删除？')){delete db[n];localStorage.setItem('h_v6',JSON.stringify(db));render()}}function setFs(v){fs+=v;if(fs<10)fs=10;$('ed').style.fontSize=fs+'px';$('fv').innerText=fs+'px'}render();</script></body></html>
